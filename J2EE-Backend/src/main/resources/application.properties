spring.application.name=J2EE-Backend

# .env file is loaded by Dotenv in main application class

spring.datasource.url=jdbc:mysql://localhost:3306/datvemaybay?useSSL=false&serverTimezone=Asia/Ho_Chi_Minh&allowPublicKeyRetrieval=true
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

jwt.secret=${JWT_SECRET:}
#jwt.expiration=3600000

jwt.access-expiration=300000
#15 ph�t
jwt.refresh-expiration=2592000000
#30 ng�y

# ==================================
# FLYWAY CONFIGURATION
# ==================================
# Tự động chạy Flyway migrations khi khởi động
spring.flyway.enabled=true
# Vị trí các file migration
spring.flyway.locations=classpath:db/migration
# Baseline version khi chuyển đổi database hiện có
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
# Encoding cho SQL files
spring.flyway.encoding=UTF-8
# Cho phép migration out of order (nếu cần)
spring.flyway.out-of-order=false
# Tắt validation để tránh lỗi khi migration thất bại
spring.flyway.validate-on-migrate=false
# Vô hiệu hóa tính năng clean database để ngăn ngừa mất mát dữ liệu do vô ý (AN TOÀN CHO PRODUCTION)
spring.flyway.clean-disabled=true

# ==================================
# HIBERNATE CONFIGURATION
# ==================================
# Tắt data.sql vì dùng Flyway
spring.sql.init.mode=never
# Hibernate không tự động tạo/sửa schema (Flyway quản lý)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Ho_Chi_Minh

logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.ai=DEBUG
logging.level.org.springframework.web.client=DEBUG
logging.level.com.example.j2ee.service=DEBUG
logging.level.com.example.j2ee.controller=DEBUG

airportdb.api.key=${AIRPORTDB_API_KEY:}

# ==================================
# SPRING AI CONFIGURATION - OpenRouter
# ==================================
# OpenRouter API Key - Lấy tại: https://openrouter.ai/keys
spring.ai.openai.api-key=${OPENROUTER_API_KEY:}
spring.ai.openai.base-url=https://openrouter.ai/api
spring.ai.openai.chat.options.model=tngtech/tng-r1t-chimera:free

# Các tùy chọn bổ sung cho OpenRouter
spring.ai.openai.chat.options.temperature=0.7
spring.ai.openai.chat.options.max-tokens=4096

# ==== OpenRouter Configuration Notes ====
# Model: openrouter/polaris-alpha (Polaris Alpha - Latest version)
# Các model khác trên OpenRouter:
#    - anthropic/claude-3.5-sonnet
#    - google/gemini-pro-1.5
#    - meta-llama/llama-3.1-70b-instruct
#    - openai/gpt-4-turbo
# Xem danh sách đầy đủ các model tại: https://openrouter.ai/models

# ==================================
# GOOGLE OAUTH2 CONFIGURATION
# ==================================
# Bạn cần tạo OAuth2 credentials tại: https://console.cloud.google.com/
# 1. Tạo project mới hoặc chọn project có sẵn
# 2. Vào "APIs & Services" > "Credentials"
# 3. Tạo "OAuth 2.0 Client IDs"
# 4. Authorized redirect URIs: http://localhost:8080/login/oauth2/code/google

spring.security.oauth2.client.registration.google.client-id=${GOOGLE_OAUTH_CLIENT_ID:}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_OAUTH_CLIENT_SECRET:}
spring.security.oauth2.client.registration.google.scope=openid, profile, email
spring.security.oauth2.client.registration.google.redirect-uri=http://localhost:8080/login/oauth2/code/google

# ==================================
# EMAIL CONFIGURATION (Gmail)
# ==================================
# Để sử dụng Gmail gửi email, bạn cần:
# 1. Bật 2-Step Verification cho Gmail
# 2. Tạo App Password tại: https://myaccount.google.com/apppasswords
# 3. Sử dụng App Password thay vì mật khẩu Gmail thông thường

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${EMAIL_USERNAME:}
spring.mail.password=${EMAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ==================================
# VNPAY PAYMENT CONFIGURATION
# ==================================
# VNPay Sandbox Configuration
# Để sử dụng VNPay, bạn cần:
# 1. Đăng ký tài khoản merchant tại: https://sandbox.vnpayment.vn/
# 2. Lấy TMN Code và Secret Key từ merchant portal
# 3. Cấu hình Return URL để nhận callback từ VNPay

vnpay.tmnCode=${VNPAY_TMN_CODE:}
vnpay.secretKey=${VNPAY_SECRET_KEY:}
vnpay.payUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
vnpay.returnUrl=http://localhost:8080/api/vnpay/payment-callback
vnpay.apiUrl=https://sandbox.vnpayment.vn/merchant_webapi/api/transaction
vnpay.frontendUrl=http://localhost:5173/vnpay-callback
